<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Optimaliz√°l√°si elj√°r√°sok | ERTI P√°rhuzamos√≠t√°s | STRUCTURE</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://uni-sopron.github.io/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/optimalizalasi-trukkok"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Optimaliz√°l√°si elj√°r√°sok | ERTI P√°rhuzamos√≠t√°s | STRUCTURE"><meta data-react-helmet="true" name="description" content="Az al√°bbiakban a feladat megold√°s√°val kapcsolatban szeml√©ltetek f≈ëbb optimaliz√°l√°si opci√≥kat, melyek specifikusan a feladat megold√°s√°nak szempontj√°b√≥l alkalmazhat√≥ak. A val√≥s√°gban alkalmaz√°s specifikusan tem√©rdek m√°s dologra kell figyelni √©s sok minden m√°s el≈ëj√∂het. P√©ld√°ul az√©rt nem esik sz√≥ itt a param√©ter√°tad√°sr√≥l, mert ahogy az eredeti program csak trivi√°lisan m√°solhat√≥ egyszer≈± t√≠pusokkal dolgozik, √∫gy a megold√°s is erre t√∂rekszik."><meta data-react-helmet="true" property="og:description" content="Az al√°bbiakban a feladat megold√°s√°val kapcsolatban szeml√©ltetek f≈ëbb optimaliz√°l√°si opci√≥kat, melyek specifikusan a feladat megold√°s√°nak szempontj√°b√≥l alkalmazhat√≥ak. A val√≥s√°gban alkalmaz√°s specifikusan tem√©rdek m√°s dologra kell figyelni √©s sok minden m√°s el≈ëj√∂het. P√©ld√°ul az√©rt nem esik sz√≥ itt a param√©ter√°tad√°sr√≥l, mert ahogy az eredeti program csak trivi√°lisan m√°solhat√≥ egyszer≈± t√≠pusokkal dolgozik, √∫gy a megold√°s is erre t√∂rekszik."><link data-react-helmet="true" rel="icon" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://uni-sopron.github.io/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/optimalizalasi-trukkok"><link data-react-helmet="true" rel="alternate" href="https://uni-sopron.github.io/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/optimalizalasi-trukkok" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://uni-sopron.github.io/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/optimalizalasi-trukkok" hreflang="x-default"><link rel="stylesheet" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/css/styles.7fe5d834.css">
<link rel="preload" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/js/runtime~main.97c92430.js" as="script">
<link rel="preload" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/js/main.75aceccd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/"></a><a class="navbar__item navbar__link navbar__link--active" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/">ERTI Feldolgoz√°s p√°rhuzamos√≠t√°s | STRUCTURE</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Uni-Sopron/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/">Bevezet√©s</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/problema/a-problema">A probl√©ma k√∂rbej√°r√°sa</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/megoldasi-modszerek">A megold√°s √©s az odavezet≈ë √∫t</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/megoldasi-modszerek">Megold√°si m√≥dszerek</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/code-tour">Fejleszt≈ëi helyzetfelm√©r√©s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/a-kornyezet-megvalasztasa">Felhaszn√°lt technol√≥gi√°k</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/optimalizalasi-trukkok">Optimaliz√°l√°si elj√°r√°sok</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/user-view">Program workflow defini√°l√°sa</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/munkafolyamatok">Munkafolyamatok √©s r√©szegys√©gek √©rt√©kel√©se</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Optimaliz√°l√°si elj√°r√°sok</h1></header><p>Az al√°bbiakban a feladat megold√°s√°val kapcsolatban szeml√©ltetek f≈ëbb optimaliz√°l√°si opci√≥kat, melyek specifikusan a feladat megold√°s√°nak szempontj√°b√≥l alkalmazhat√≥ak. A val√≥s√°gban alkalmaz√°s specifikusan tem√©rdek m√°s dologra kell figyelni √©s sok minden m√°s el≈ëj√∂het. P√©ld√°ul az√©rt nem esik sz√≥ itt a param√©ter√°tad√°sr√≥l, mert ahogy az eredeti program csak trivi√°lisan m√°solhat√≥ egyszer≈± t√≠pusokkal dolgozik, √∫gy a megold√°s is erre t√∂rekszik.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Fontos lesz√∂gezni m√°r az elej√©n, hogy a legjobb √©s legfontosabb optimaliz√°l√°si m√≥dszer mindig a feladat szempontj√°b√≥l a leghat√©konyabb algoritmus megtal√°l√°sa.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="a-modern-√©s-a-r√©gi-szeml√©let-k√∂zti-k√ºl√∂nbs√©g">A modern √©s a r√©gi szeml√©let k√∂zti k√ºl√∂nbs√©g<a class="hash-link" href="#a-modern-√©s-a-r√©gi-szeml√©let-k√∂zti-k√ºl√∂nbs√©g" title="Direct link to heading">‚Äã</a></h2><p>Jellemz≈ëen &quot;greenfield&quot; projektekn√©l halljuk azt a tan√°csot, hogy ha m√≥dunkban √°ll, mindig haszn√°ljunk modern implement√°ci√≥kat.
Gondoljunk p√©ld√°ul egy hagyom√°nyos dinamikus t√∂mb √©s egy <code>std::vector</code> k√∂zti k√ºl√∂nbs√©gekre. Az ut√≥bbi haszn√°lata sz√°mos el≈ëre defini√°lt funkcional√≠t√°ssal seg√≠ti a programoz√°st, √©s a mem√≥ria felszabad√≠t√°s√°val sem kell foglalkoznunk (l√°sd <a href="https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization" target="_blank" rel="noopener noreferrer">RAII</a>). De m√©g ha a dinamikus mem√≥riakezel√©st nem is vessz√ºk figyelembe, akkor is aj√°nlatosabb egy hagyom√°nyos C t√∂mb helyett egy <code>std::array</code> haszn√°lata, m√°rcsak param√©ter√°tad√°s szempontj√°b√≥l is.</p><p>Alapvet≈ëen a modern eszk√∂z√∂k haszn√°lata prefer√°lt minden esetben, kiv√©telt k√©peznek ez al√≥l a teljes√≠tm√©nyorient√°lt rendszerek, illetve azok, amelyeknek implement√°ci√≥ja m√°r megt√∂rt√©nt, √©s tov√°bbi optimaliz√°l√°si lehet≈ës√©geket keres√ºnk.</p><p>A modern megold√°sok ny√∫jtotta k√©nyelem √©s a hibalehet≈ës√©gek minimaliz√°l√°sa az esetek nagyr√©sz√©ben a teljes√≠tm√©ny rov√°s√°ra megy.
Nem l√©tezik &quot;k√∂lts√©gmentes absztrakci√≥&quot;. Min√©l k√∂zelebb dolgozik a fejleszt≈ë a mem√≥ri√°val, ann√°l t√∂bb lehet≈ës√©ge van optim√°lis k√≥d √≠r√°s√°ra, amit a k√≥d min≈ës√©g√©nek √©s olvashat√≥s√°g√°nak k√°r√°ra √©r el. Projekt √©s fejleszt≈ë f√ºgg≈ë az optim√°lis egyens√∫ly megtal√°l√°sa.</p><br>Egy p√©lda a fentebb v√°zolt hasonlatra:<br><br>(Haszn√°lt compiler: Clang 13.0 -O0 kapcsol√≥val)<br><br><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;vector&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-nasm theme-code-block"><div class="codeBlockContent_csEI nasm"><pre tabindex="0" class="prism-code language-nasm codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">main:                                   # @main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        push    rbp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     rbp, rsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sub     rsp, 64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lea     rdi, [rbp - 32]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     qword ptr [rbp - 56], rdi       # 8-byte Spill</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    std::allocator&lt;int&gt;::allocator() [base object constructor]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     rdx, qword ptr [rbp - 56]       # 8-byte Reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lea     rdi, [rbp - 24]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     esi, 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    std::vector&lt;int, std::allocator&lt;int&gt; &gt;::vector(unsigned long, std::allocator&lt;int&gt; const&amp;) [base object constructor]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jmp     .LBB0_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.LBB0_1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lea     rdi, [rbp - 32]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    std::allocator&lt;int&gt;::~allocator() [base object destructor]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lea     rdi, [rbp - 24]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    std::vector&lt;int, std::allocator&lt;int&gt; &gt;::~vector() [base object destructor]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        xor     eax, eax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        add     rsp, 64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pop     rbp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     rcx, rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     eax, edx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     qword ptr [rbp - 40], rcx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     dword ptr [rbp - 44], eax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lea     rdi, [rbp - 32]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    std::allocator&lt;int&gt;::~allocator() [base object destructor]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     rdi, qword ptr [rbp - 40]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    _Unwind_Resume@PLT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">__clang_call_terminate:                 # @__clang_call_terminate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        push    rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    __cxa_begin_catch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    std::terminate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.L.str:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .asciz  &quot;cannot create std::vector larger than max_size()&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> vec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static_cast</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">calloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-nasm theme-code-block"><div class="codeBlockContent_csEI nasm"><pre tabindex="0" class="prism-code language-nasm codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">main:                                   # @main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        push    rbp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     rbp, rsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sub     rsp, 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     edi, 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     esi, 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        call    calloc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mov     qword ptr [rbp - 8], rax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        xor     eax, eax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        add     rsp, 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pop     rbp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ret</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Mint az l√°that√≥, a k√©t p√©lda teljesen m√°s assembly k√≥dra fordul.<br>
Az <code>std::vector</code> √°ltali bels≈ë √°llapotkezel√©s, illetve a konstructor √©s destruktor h√≠v√°s dr√°maian megn√∂velte a ford√≠tott k√≥d m√©ret√©t.</p><p>Ez csak egy egyszer≈± p√©lda arra, hogy att√≥l, hogy modernebb nyelvi eszk√∂z√∂ket tesz√ºnk egy programba, az m√©g nem felt√©tlen lesz minden esetben gyorsabb (s≈ët...).</p><p>A legjobb √∫t valahol a kett≈ë k√∂z√∂tt van, meg kell tal√°lni azt a utat, ahol a k√©nyelmi funkci√≥k, teljes√≠tm√©ny, helyes hibakezel√©s √©s clean code (ki akar t√∂bb t√≠z soros <code>free_everything(...)</code> jelleg≈± funkci√≥kat √≠rni?) tal√°lkozik.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="v√©letlen-gener√°l√°s">V√©letlen-gener√°l√°s<a class="hash-link" href="#v√©letlen-gener√°l√°s" title="Direct link to heading">‚Äã</a></h3><p>V√©letlen gener√°l√°sra a de facto m√≥dszer a <code>rand()</code> √©s az <code>srand()</code>. M√≠g az ut√≥bbival a <code>rand()</code> √°ltal haszn√°lt seed-et inicializ√°ljuk, addig az el≈ëbbivel t√∂rt√©nik a [0, RAND_MAX) intervallumban t√∂rt√©n≈ë v√©letlensz√°m-gener√°l√°s. A probl√©ma ezzel a megold√°ssal az, hogy glob√°lis √°llapotot haszn√°l, ez√°ltal konkurrens v√©letlensz√°m-gener√°l√°sra nem alkalmas. Modern alternat√≠v√°i a Mersenne Twister algoritmuson alapul√≥ standard k√∂nyvt√°rban tal√°lhat√≥ implement√°ci√≥i. Az implement√°ci√≥ √©rdekess√©ge, hogy b√°r megadhat√≥ param√©terk√©nt el≈ëre defini√°lt seed v√°ltoz√≥, nem k√∂telez≈ë ezt megadni. (De ennek hi√°nya miatt nem fognak minden programfut√°skor ugyanazok a v√©letlenek gener√°l√≥dni, mint a <code>rand()</code> eset√©n.) √çgy a v√©letlenkezel√©s is biztos√≠tott, de a seed haszn√°lat√°val a tesztelhet≈ës√©g is megmarad.
A v√©letlen gener√°l√°sra haszn√°lt template oszt√°lyok az <code>std::uniform_real_distribution&lt;T&gt;</code> √©s az <code>std::uniform_int_distribution&lt;T&gt;</code>.<br>
Haszn√°latra egy p√©ldak√≥d:</p><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">inline</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random_between</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> low</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">uniform_real_distribution</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">double</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">low</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> high</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">mt19937 </span><span class="token function" style="color:#d73a49">rng</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">random_device </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rng</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="goto">Goto<a class="hash-link" href="#goto" title="Direct link to heading">‚Äã</a></h3><p>A <code>goto</code> alap√∫ folyamatvez√©rl√©s er≈ësen antipatternnek sz√°m√≠t az esetek 99.999%-√°ban. Egyetlen mai szemmel re√°lis felhaszn√°l√°si ter√ºlete a t√∂bbsz√∂r√∂sen be√°gyazott <code>for</code> ciklusb√≥l t√∂rt√©n≈ë kil√©p√©s bizonyos adott teljes√ºl√©se eset√©n. Fejleszt≈ëi szemmel n√©zve spagetti k√≥dot eredm√©nyez, teljes√≠tm√©ny fel≈ël megk√∂zel√≠tve pedig kikapcsol minden CPU-ban √©s ford√≠t√≥ban tal√°lhat√≥ branchel√©si optimaliz√°ci√≥t.
Mivel t√∂bb matematikai met√≥dus is ilyen m√≥don van implement√°lva, ezeknek az √°t√≠r√°sa egy optimaliz√°l√°si lehet≈ës√©g.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="constexpr-vs-macro">Constexpr vs Macro<a class="hash-link" href="#constexpr-vs-macro" title="Direct link to heading">‚Äã</a></h3><p>A constexpr kulcssz√≥ √©s az azt megel≈ëz≈ë <a href="https://hu.wikipedia.org/wiki/Template_metaprogramoz%C3%A1s" target="_blank" rel="noopener noreferrer">meta-programoz√°s</a> fogalma szorosan √∂sszekapcsol√≥dik. Mindkett≈ë arra hivatott, hogy a makr√≥k haszn√°lat√°t visszaszor√≠ts√°k. A constexpr kulcssz√≥val ell√°tott v√°ltoz√≥knak van t√©nyleges mem√≥riater√ºlete (l√°sd: <code>int max = std::max(1, RANDOM_INTEGER_MACRO)</code> =&gt; undefined behaviour), tov√°bb√° rendelkeznek l√°t√≥k√∂rrel, √≠gy nem kell att√≥l tartanunk, hogy n√©v√ºtk√∂z√©s √°llna fent, vagy hogy a glob√°lis namespace-t teleszemeteln√©nk.A constexpr, meta-programoz√°s (√©s C++20 √≥ta a <a href="https://en.cppreference.com/w/cpp/language/consteval" target="_blank" rel="noopener noreferrer">consteval</a>) rendelkezik tov√°bb√° azzal a tulajdons√°ggal, hogy a ford√≠t√°si id≈ëben ismert v√°ltoz√≥kkal ford√≠t√°si id≈ëben m≈±veleteket v√©gezz√ºnk. √ârtelemszer≈±en ez azzal j√°r, hogy a ford√≠t√°si id≈ë megn√∂vekszik.</p><p>Vegy√ºk p√©ld√°ul az al√°bbi k√≥dot:</p><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">custom_pow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">custom_pow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> pow_with_constexpr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">custom_pow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> pow_without_constexpr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">custom_pow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="Constexpr example" src="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/images/constexpr-418c3c3398ae6e2f81b1b903d74c749f.png"></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Ha tehetj√ºk, a ford√≠t√°si id≈ëben ismert v√°ltoz√≥kat mindig l√°ssuk el constexpr m√≥dos√≠t√≥val!</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="matematikai-m≈±veletek">Matematikai m≈±veletek<a class="hash-link" href="#matematikai-m≈±veletek" title="Direct link to heading">‚Äã</a></h3><p>A C √©s C++ matematikai k√∂nyvt√°rak k√∂zti k√ºl√∂nbs√©gek k√∂zt megeml√≠thet≈ë, hogy ut√≥bbi m√°r standard implement√°ci√≥t√≥l f√ºgg≈ëen tartalmazza a constexpr kulcssz√≥val j√°r√≥ el≈ëny√∂ket, tov√°bb√° ett≈ël eltekintve a C++ standard sz√°mos olyan fejl√©cf√°jlt tartalmaz, mint p√©ld√°ul a <code>&lt;random&gt;</code>, amik seg√≠ts√©g√©vel a jelenlegi implement√°ci√≥kat lecser√©lve az eddigi k√≥db√°zis m√©rete jelent≈ësen cs√∂kken.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ford√≠t√≥-b≈ëv√≠tm√©nyek-√©s-egy√©b-m√≥dos√≠t√≥k">Ford√≠t√≥ b≈ëv√≠tm√©nyek √©s egy√©b m√≥dos√≠t√≥k<a class="hash-link" href="#ford√≠t√≥-b≈ëv√≠tm√©nyek-√©s-egy√©b-m√≥dos√≠t√≥k" title="Direct link to heading">‚Äã</a></h2><p>Az al√°bbiakban n√©h√°ny teljes√≠tm√©ny szempontj√°b√≥l hasznos m√≥dos√≠t√≥ kulcssz√≥t √©s nem standard ford√≠t√≥ b≈ëv√≠tm√©nyt mutatok be.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="inline--always_inline">inline / always_inline<a class="hash-link" href="#inline--always_inline" title="Direct link to heading">‚Äã</a></h3><p>Az <code>inline</code> m√≥dos√≠t√≥sz√≥ seg√≠ts√©g√©vel el√©rhetj√ºk, hogy r√∂vid met√≥dusainkat a ford√≠t√≥ ne k√ºl√∂n√°ll√≥ met√≥dusk√©nt kezelje, hanem megh√≠v√°s sor√°n &quot;√°gyazza be&quot; a met√≥dust√∂rzset a h√≠v√°s hely√©re. Jellemz≈ëen getter-setter met√≥dusokn√°l haszn√°lj√°k, de b√°rmilyen kism√©ret≈± elj√°r√°s eset√©n alkalmazhat√≥. Mivel els≈ësorban csak egy tippnek szolg√°l a ford√≠t√≥ sz√°m√°ra, amit figyelmen k√≠v√ºl hagyhat, az <code>always_inline</code> ford√≠t√≥ b≈ëv√≠tm√©ny seg√≠ts√©g√©vel &quot;er≈ëszakolhatjuk ki&quot; az elv√°rt m≈±k√∂d√©st. Gyakorlatilag ami t√∂rt√©nik az az, hogy meg tudunk sp√≥rolni assembly szinten j√≥p√°r <code>jmp</code> m≈±veletet.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="restrict">restrict<a class="hash-link" href="#restrict" title="Direct link to heading">‚Äã</a></h3><p>A <code>restrict</code> kulcssz√≥ a Fortran programoz√°si nyelvb≈ël ismeretes. A C11 szabv√°ny r√©sze, azonban a C++ szabv√°nyba nem ker√ºlt bele. L√©nyege, hogy mutat√≥ vagy referencia √°tad√°sn√°l a ford√≠t√≥ sz√°m√°ra tudatjuk, hogy az adott referencia vagy mutat√≥ az egyetlen m√≥d arra, hogy el√©rj√ºk a m√∂g√∂ttes objektumot, ez√°ltal elker√ºlve az esetleges aliasing felold√°sb√≥l sz√°rmaz√≥ t√∂bbletmunk√°t. Ha megs√©rtj√ºk ezt a krit√©riumot, az nemdefini√°lt viselked√©st eredm√©nyez. Kifejezetten hat√©kony t√∂bb t√∂mb√∂n v√©gzett m≈±velet eset√©n, ahol t√∂bb t√∂mb param√©ter eset√©n ezzel a kulcssz√≥val biztos√≠tjuk a ford√≠t√≥nak, hogy a k√©t t√∂mb nem egyezik meg.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cleanup">cleanup<a class="hash-link" href="#cleanup" title="Direct link to heading">‚Äã</a></h3><p>A <code>cleanup</code> attrib√∫tum seg√≠ts√©g√©vel megadhatjuk, hogy egy v√°ltoz√≥ jelenlegi scope-b√≥l t√∂rt√©n≈ë kil√©p√©sekor milyen elj√°r√°s fusson le. Nem C++ specifikus megold√°s. Haszn√°lat√°val k√≥dunk min≈ës√©g√©n seg√≠thet√ºnk az√°ltal, hogy nem kell a felszabad√≠t√°ssal foglalkoznunk. M≈±k√∂dik <code>std::exception</code> dob√°sa eset√©n is.</p><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">autofree</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression keyword" style="color:#00009f">__attribute__</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression function" style="color:#d73a49">cleanup</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">free_mem</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">__attribute__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">always_inline</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">inline</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">free_mem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autofree </span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static_cast</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">calloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="simd">SIMD<a class="hash-link" href="#simd" title="Direct link to heading">‚Äã</a></h2><p>A <a href="https://hu.wikipedia.org/wiki/SIMD" target="_blank" rel="noopener noreferrer">SIMD</a> alap√∫ feldolgoz√°s l√©nyege az, hogy az elemi m≈±veleteket egyszerre √©s egyid≈ëben v√©gezz√ºnk el egy tetsz≈ëleges vektor √∂sszes elem√©re. Leg√∫jabb gyakorlati megval√≥s√≠t√°sai, az AVX (Advanced Vector Extensions) √©s AVX2 √°ltal ker√ºltek bele az x86 architekt√∫r√°ba, amit mind az Intel, mint pedig az AMD t√°mogat. Programoz√≥i szemmel n√©zve ez nek√ºnk az√©rt j√≥, mert √∫gy tudjuk optimaliz√°lni a k√≥dot, hogy az √©rt√©kead√°shoz tartoz√≥ aritmetikai m≈±veleteket egybe√≠rjuk.</p><p>P√©ld√°ul itt van ez a k√©t met√≥dus.</p><div class="codeBlockContainer_J+bg language-cpp theme-code-block"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// SIMD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum_work</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> constant</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        arr3</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> constant </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> arr1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> arr2</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// NON-SIMD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bad_sum_work</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> arr3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> constant</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        arr3</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> constant </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> arr1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        arr3</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> arr3</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> arr2</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Ut√≥bbi √°rtalmatlannak t≈±nhet, hiszen az √∂sszead√°s, mint m≈±velet, k√©tszer szerepel, m√©gis teljesen elt√©r≈ë teljes√≠tm√©nnyel futnak le.</p><p><img alt="SIMD example" src="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/images/simd-0cbec4a5b69af3699226f756f9bca295.png"></p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>Fontos megjegyezni, hogy ez csak akkor m≈±k√∂dik, ha nem √°ll fent az √∫gynevezett <strong>adat f√ºgg≈ës√©g</strong> jelens√©ge.
Ha a fentebb l√©v≈ë <code>sum_work()</code> met√≥dusba k√©t √∂sszead√°s k√∂z√© beiktatunk egy z√°r√≥jelet, vagy egy olyan egy√©b m√°s m≈±veletet, ami miatt a m≈±veletek v√©grehajthat√≥s√°g√°nak sorrendje k√∂t√∂tt lesz, ez a fajta vektoriz√°ci√≥ √°ltali teljes√≠tm√©ny elv√©sz.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="egyedi-allok√°torok">Egyedi allok√°torok<a class="hash-link" href="#egyedi-allok√°torok" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="√°ltal√°nos-allok√°torok">√Åltal√°nos allok√°torok<a class="hash-link" href="#√°ltal√°nos-allok√°torok" title="Direct link to heading">‚Äã</a></h3><p>√Åtal√°nos allok√°tornak nevez√ºnk b√°rmi olyan mem√≥riafoglal√°si elj√°r√°st, amivel a rendszer futtat√°sa sor√°n b√°rmikor k√©pesek vagyunk mem√≥ri√°t foglalni √©s azt b√°rmely m√°s adott ponton felszabad√≠tani. Tipikus (de nem kiz√°r√≥lagos) p√©ld√°k a <code>malloc()/calloc()</code> √©s a <code>free()</code>, tov√°bb√° a <code>new/new[]</code> √©s <code>delete/delete[]</code>, de a stacken t√∂rt√©n≈ë objektum inicializ√°l√°s is. A probl√©ma ezekkel a megold√°sokkal az, hogy ah√°nyszor √∫j mem√≥ri√°t allok√°lunk, annyiszor kell az oper√°ci√≥s rendszer fel√© t√∂bbleth√≠v√°st kezdem√©nyezn√ºnk.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="vlaallocamalloca">VLA/alloca/malloca<a class="hash-link" href="#vlaallocamalloca" title="Direct link to heading">‚Äã</a></h4><p>A VLA (variable-lenght array) egy eredetileg C szabv√°nyelem, azonban &quot;m√≥dos√≠tott form√°ban&quot; √©s ford√≠t√≥ b≈ëv√≠tm√©nyk√©nt (de minden nagyobb ford√≠t√≥ t√°mogatja) el√©rhet≈ë <code>alloca/malloca</code> met√≥dusok seg√≠ts√©g√©vel C++-ban is. A l√©nyege, hogy lehet≈ës√©get biztos√≠tanak mem√≥riafoglal√°sra a stack-en ford√≠t√°si id≈ëben nem ismert m√©ret≈± t√∂mb√∂k eset√©ben is. Hab√°r nagyon cs√°b√≠t√≥ lehet ez a megold√°s, nem szabad arr√≥l elfeledkezni, hogy a stack alapvet≈ëen a kis mem√≥riam√©ret miatt nem nagy objektumok t√°rol√°s√°ra lett kital√°lva , √©s ak√°r egy relat√≠v nagy mem√≥riafoglal√°s is k√©pes stackoverflow hib√°t eredm√©nyezni. Emiatt haszn√°lat√°val a program sokkal s√©r√ºl√©kenyebb lesz egy nem v√°rt nagyobb bemeneti √©rt√©kre ami alapj√°n mem√≥ri√°t foglalunk. (<a href="https://lkml.org/lkml/2018/3/7/621" target="_blank" rel="noopener noreferrer">Linus Tornalds VLA eml√≠t√©se a Linux kernelben</a>)</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="√°ltal√°nos-allok√°torok-elt√©r≈ë-implement√°ci√≥val">√Åltal√°nos allok√°torok elt√©r≈ë implement√°ci√≥val<a class="hash-link" href="#√°ltal√°nos-allok√°torok-elt√©r≈ë-implement√°ci√≥val" title="Direct link to heading">‚Äã</a></h4><p>Sz√°mos <code>malloc()/calloc()</code> implement√°ci√≥ sz√ºletett az id≈ëk sor√°n. Akkor tudja az ember, hogy egy allok√°tor rep√≥j√°t b√∂ng√©szi, hogy mindenk√©ppen van legal√°bb egy benchmark √°bra arr√≥l, hogy gyorsabb, mint a t√∂bbi. Alapvet≈ëen a <a href="https://github.com/microsoft/mimalloc" target="_blank" rel="noopener noreferrer">mi_malloc</a> Microsoft √°ltal k√©sz√≠tett implement√°ci√≥t teszteltem, de sz√°mos m√°s el√©rhet≈ë megold√°s van. Teljess√©g ig√©nye n√©lk√ºl: tcmalloc, rpmalloc, jemalloc stb... Val√≥ban gyorsabb az allok√°l√°si id≈ë, de m√©g mindig nem annyira effekt√≠v megold√°s, mint egy pool allok√°tor.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pool-allok√°torok">Pool allok√°torok<a class="hash-link" href="#pool-allok√°torok" title="Direct link to heading">‚Äã</a></h3><p>A pool allok√°torok seg√≠ts√©g√©vel a dinamikus mem√≥riafoglal√°ssal j√°r√≥ k√∂lts√©gen tudunk sp√≥rolni az√°ltal, hogy a program kezdetekor lefoglalunk egy meghat√°rozott, jellemz≈ëen nagyobb mem√≥riablokkot, √©s a k√©s≈ëbbi &quot;mem√≥riafoglal√°sainkat&quot; ebb≈ël a m√°r lefoglalt blokkb√≥l vonjuk el. C√©lszer≈± minden egyes ind√≠tott sz√°lra sz√°lspecifikusan inicializ√°lni egy allok√°tor objektumot. A megold√°s h√°tr√°nya, hogy √≠gy a programunk fut√°sid≈ëben v√©lhet≈ëen t√∂bb mem√≥ri√°t fog haszn√°lni. Ett≈ël eltekintve √©n alapvet≈ëen ezt az ir√°nyt prefer√°lom.</p><p><img alt="Allocations example" src="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/images/allocations-e3ddb294099e0505fcb0d8660869623f.png"></p><p><em>(A stack alap√∫ allok√°torok stackoverflow hib√°val elsz√°lltak...)</em></p><p>Megl√©v≈ë pool allok√°torral pedig semmi ideig nem tart lecser√©lni (az am√∫gy sem k√∂zkedvelt) alap√©rtelmezett <code>std::allocator</code>-t.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gpu-offloading">GPU offloading<a class="hash-link" href="#gpu-offloading" title="Direct link to heading">‚Äã</a></h2><p>A heterog√©n processzorokkal v√©gzett egyidej≈± munkav√©gz√©s egy mostan√°ban vir√°gkor√°t √©l≈ë t√©mak√∂r, legf≈ëk√©pp a kutat√°si c√©l√∫, sz√°m√≠t√°sig√©nyes felhaszn√°l√°s ter√©n. A r√©gi id≈ëkben egy-egy processzor gener√°ci√≥ v√°lt√°sn√°l sokkal szembet≈±n≈ëbb teljes√≠tm√©nyn√∂veked√©s volt tapasztalhat√≥, azonban ez a n√∂veked√©s id≈ër≈ël id≈ëre egyre csak cs√∂kken. Ennek kiegyens√∫lyoz√°s√°ra tal√°lt√°k ki, hogy az elv√©gzend≈ë alsz√°m√≠t√°sokat (melyek legink√°bb lebeg≈ëpontos √©s t√∂mb√∂kkel kapcsolatos m≈±veletekre vonatkoznak) legyen lehet≈ës√©g sz√©tosztani a CPU-t√≥l elt√©r≈ë eszk√∂z√∂k√∂n is. Legjellemz≈ëbb ilyen eszk√∂z√∂k a vide√≥k√°rty√°k √©s az FPGA-k. Mivel a vide√≥k√°rty√°s felhaszn√°l√°snak van √°ltal√°nosan √©rtelme, ez√©rt ink√°bb ezzel foglalkoztam.<br><br>
A k√©t legnevezetesebb platform a vide√≥k√°rty√°k programoz√°s√°ra a Cuda √©s az OpenCL.
Mindkett≈ë tulajdons√°ga, hogy a vide√≥k√°rty√°ra specializ√°lt met√≥dusokat (kernelk√≥dot) k√ºl√∂n f√°jlban vagy string liter√°lk√©nt kell t√°rolni.
Ha nem szeretn√©k alacsony szinten kezelni ezeket a technol√≥gi√°kat, aj√°nlott a Khronos Group √°ltal el≈ëterjesztett specifik√°ci√≥, a SYCL, √©s ennek valamely implement√°ci√≥j√°nak haszn√°lata, att√≥l f√ºgg≈ëen, hogy milyen eszk√∂zt√°mogat√°sra van sz√ºks√©g√ºnk.<br><br>
<img alt="SYCL implementations" src="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/images/sycl-863aed6885fdf0b554111c4915000410.jpg">
T√∂bb implement√°ci√≥ sajnos nem multiplatform √©s kifejezetten ford√≠t√≥specifikusak.<br>
Fontos megjegyezni, hogy a legt√∂bb C++ nyelvi elem nem haszn√°lhat√≥ kernelk√≥d k√∂rnyezetben.
A projekt szempontj√°b√≥l b≈ës√©gesen elegend≈ë az OpenCL √°ltal ny√∫jtott interf√©sz, de mivel a ComputeCpp projekt integr√°l√°sa megoldhat√≥nak t≈±nik multiplatform felt√©telekkel, √≠gy nem kiz√°rt, hogy k√©s≈ëbbiekben ez ker√ºl haszn√°latba.<br><br>
A munkav√©gz√©s jellemz≈ëen √∫gy zajlik ezekkel, hogy a hoszt platformon (CPU √©s RAM) l√©trehozott mem√≥ri√°t √°tm√°soljuk az eszk√∂zre, majd a kernelk√≥dunkat (met√≥dusunkat) megh√≠vva m√°r k√©pesek vagyunk a vide√≥k√°rty√°n mem√≥ria manipul√°ci√≥t v√©grehajtani.<br> K√©t dologra kell csak figyelni.</p><ul><li><strong>Sose foglaljunk le t√∫l nagy mem√≥ri√°t a k√ºls≈ë eszk√∂z√∂n!</strong></li><li><strong>Ne haszn√°ljunk olyan logik√°t, ami mutex haszn√°lat√°t ig√©nyel, vagy an√©lk√ºl race-condition-t eredm√©nyezne!</strong></li></ul><p>Az els≈ë √°ll√≠t√°s indokl√°sa az, hogy annak ellen√©re, hogy nagy mennyis√©g≈± VRAM √°ll rendelkez√©s√ºnkre, annak kezel√©se, mivel nem az oper√°ci√≥s rendszert≈ël f√ºgg≈ë hanem az eszk√∂z drivert≈ël, sokkal bizonytalanabb √©s √©rz√©kenyebb.</p><p>A m√°sodik √°ll√≠t√°s oka, hogy mivel egy GPU szerkezeti fel√©p√≠t√©se teljesen m√°s, a jellemz≈ëen sok sz√°l egym√°ssal t√∂rt√©n≈ë szinkroniz√°l√°sa √©s v√°rakoztat√°sa a megszokottn√°l is t√∂bb overheaddel √©s ez√°ltal teljes√≠tm√©nycs√∂kken√©ssel j√°r.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/a-kornyezet-megvalasztasa"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Felhaszn√°lt technol√≥gi√°k</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/megoldas/user-view"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Program workflow defini√°l√°sa</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-modern-√©s-a-r√©gi-szeml√©let-k√∂zti-k√ºl√∂nbs√©g" class="table-of-contents__link toc-highlight">A modern √©s a r√©gi szeml√©let k√∂zti k√ºl√∂nbs√©g</a><ul><li><a href="#v√©letlen-gener√°l√°s" class="table-of-contents__link toc-highlight">V√©letlen-gener√°l√°s</a></li><li><a href="#goto" class="table-of-contents__link toc-highlight">Goto</a></li><li><a href="#constexpr-vs-macro" class="table-of-contents__link toc-highlight">Constexpr vs Macro</a></li><li><a href="#matematikai-m≈±veletek" class="table-of-contents__link toc-highlight">Matematikai m≈±veletek</a></li></ul></li><li><a href="#ford√≠t√≥-b≈ëv√≠tm√©nyek-√©s-egy√©b-m√≥dos√≠t√≥k" class="table-of-contents__link toc-highlight">Ford√≠t√≥ b≈ëv√≠tm√©nyek √©s egy√©b m√≥dos√≠t√≥k</a><ul><li><a href="#inline--always_inline" class="table-of-contents__link toc-highlight">inline / always_inline</a></li><li><a href="#restrict" class="table-of-contents__link toc-highlight">restrict</a></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight">cleanup</a></li></ul></li><li><a href="#simd" class="table-of-contents__link toc-highlight">SIMD</a></li><li><a href="#egyedi-allok√°torok" class="table-of-contents__link toc-highlight">Egyedi allok√°torok</a><ul><li><a href="#√°ltal√°nos-allok√°torok" class="table-of-contents__link toc-highlight">√Åltal√°nos allok√°torok</a></li><li><a href="#pool-allok√°torok" class="table-of-contents__link toc-highlight">Pool allok√°torok</a></li></ul></li><li><a href="#gpu-offloading" class="table-of-contents__link toc-highlight">GPU offloading</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/js/runtime~main.97c92430.js"></script>
<script src="/temalabor-o21-ERTI-feldolgozasi-sebesseg-gyorsitas/index.html/assets/js/main.75aceccd.js"></script>
</body>
</html>